<html lang="en">
        <head>
                <title>ShootingDemo</title>
                <meta charset="utf-8">
                <style media="screen">
                #holder {

                    left: 50%;
                    position: absolute;
                    top: 50%;
                    height: 400px;
                    margin: -200px 0 0 -200px;
                    width: 400px;
                    background: black;
                }
                </style>
        </head>
        <body>
                <script src="knockout-2.1.0.js"></script>
                <script src="jquery-1.7.2.min.js"></script>
                <script src="komodel.js"></script>
                <script src="raphael.js"></script>
                <script src="shooting.js"></script>
                <script src="servant.js"></script>
                <script src="player.js"></script>
                <script src="reservoir.js"></script>
                <script src="cleverservant.js"></script>
                <script>
                        var dead = false;
                        Raphael(function() {
                            var r=Raphael("holder");
                            player.setself(r.circle(200,380,2).attr({'stroke-width':3,stroke:'#00FF00',fill:'#ffffff'}));
                            //Frame
                            for (var i=0;i<8;i++) servants.addservant(cleverservant(r,Math.PI*(i+1)/9));
                            var stp = Date.now();
                            window.setInterval(function(){
                                    if (dead) return;
                                    bullets.nextmove();
                                    servants.tick();
                                    player.tick();
                                    tickreservoir(player.x/400,player.y/400);
                                    shootmodel.time(Date.now()-stp);
                                    if (shootmodel.time()>shootmodel.besttime())
                                        shootmodel.besttime(shootmodel.time());
                                    if (bullets.detectcoll(player.x,player.y)) {
                                            dead = true;
                                            bullets.clear();
                                            servants.clear();
                                            player.dead();
                                            alert('DEAD');
                                            stp=Date.now();
                                            player.setself(r.circle(200,380,2).attr({'stroke-width':3,stroke:'#00FF00',fill:'#ffffff'}));
                                            player.x=200;
                                            player.y=380;
                                            dead = false;
                                            for (var i=0;i<8;i++) servants.addservant(cleverservant(r,Math.PI*(i+1)/9));
                                    };
                            },10);
                        });
                        
                </script>
                <div>Bullets: <span data-bind="text: bulletcount">0</span>, <br/>
                     Servants: <span data-bind="text: servantcount"></span>, <br/>
                     FPS: <span data-bind="text: fpscount">0</span>, <br/>
                     Time: <span data-bind="text: time">0</span>ms, <br/>
                     Best time: <span data-bind="text: besttime"></span>ms <br/></div>
                
                <div id="holder"></div>
        </body>
</html>
